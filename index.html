<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Trigonometry Questions</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/mathquill/build/mathquill.css"
    />
    <style>
        .questions-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Creates two equal-width columns */
            gap: 20px; /* Adds space between columns */
            margin: 20px;
        }
        .question {
            margin: 0px 0;
        }
    </style>
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  </head>
  <body>
    <div style="text-align: center; margin: 20px;">
      <button id="regenerateBtn" style="padding: 10px 20px; font-size: 16px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 20px;">
        Generate New Problems
      </button>
      <label style="font-size: 16px; cursor: pointer; margin-right: 20px;">
        <input type="checkbox" id="showAnswers" style="margin-right: 8px; transform: scale(1.2);">
        Show Answers
      </label>
      <label style="font-size: 16px; cursor: pointer; margin-right: 20px;">
        <input type="checkbox" id="fullCircle" style="margin-right: 8px; transform: scale(1.2);">
        Full Circle (0 to 2π)
      </label>
      <label style="font-size: 16px; cursor: pointer;">
        <input type="checkbox" id="includeNegative" style="margin-right: 8px; transform: scale(1.2);">
        Include Negative Angles
      </label>
    </div>
    <div class="questions-container" id="questionsContainer">
      <!-- Questions will be injected here -->
    </div>

    <script src="https://unpkg.com/mathquill/build/mathquill.js"></script>
    <script>
      // Initialize MathQuill
      const MQ = MathQuill.getInterface(2);

      // Common angles in radians (upper half: 0 to π)
      var angles = [
        "0",
        "\\frac{\\pi}{6}",
        "\\frac{\\pi}{4}",
        "\\frac{\\pi}{3}",
        "\\frac{\\pi}{2}",
        "\\pi",
        "\\frac{5\\pi}{6}",
        "\\frac{2\\pi}{3}",
        "\\frac{3\\pi}{4}",
      ];

      // Common angles in radians (full circle: 0 to 2π)
      var anglesFullCircle = [
        "0",
        "\\frac{\\pi}{6}",
        "\\frac{\\pi}{4}",
        "\\frac{\\pi}{3}",
        "\\frac{\\pi}{2}",
        "\\frac{2\\pi}{3}",
        "\\frac{3\\pi}{4}",
        "\\frac{5\\pi}{6}",
        "\\pi",
        "\\frac{7\\pi}{6}",
        "\\frac{5\\pi}{4}",
        "\\frac{4\\pi}{3}",
        "\\frac{3\\pi}{2}",
        "\\frac{5\\pi}{3}",
        "\\frac{7\\pi}{4}",
        "\\frac{11\\pi}{6}",
        "2\\pi"
      ];

      // Negative angles (upper half: -π to 0)
      var anglesNegative = [
        "-\\frac{\\pi}{6}",
        "-\\frac{\\pi}{4}",
        "-\\frac{\\pi}{3}",
        "-\\frac{\\pi}{2}",
        "-\\frac{2\\pi}{3}",
        "-\\frac{3\\pi}{4}",
        "-\\frac{5\\pi}{6}",
        "-\\pi"
      ];

      // Negative angles (full circle: -2π to 0)
      var anglesNegativeFullCircle = [
        "-\\frac{\\pi}{6}",
        "-\\frac{\\pi}{4}",
        "-\\frac{\\pi}{3}",
        "-\\frac{\\pi}{2}",
        "-\\frac{2\\pi}{3}",
        "-\\frac{3\\pi}{4}",
        "-\\frac{5\\pi}{6}",
        "-\\pi",
        "-\\frac{7\\pi}{6}",
        "-\\frac{5\\pi}{4}",
        "-\\frac{4\\pi}{3}",
        "-\\frac{3\\pi}{2}",
        "-\\frac{5\\pi}{3}",
        "-\\frac{7\\pi}{4}",
        "-\\frac{11\\pi}{6}",
        "-2\\pi"
      ];

      // Exact values for sin and cos of common angles
      var exactValues = {
        "0": { sin: "0", cos: "1" },
        "\\frac{\\pi}{6}": { sin: "\\frac{1}{2}", cos: "\\frac{\\sqrt{3}}{2}" },
        "\\frac{\\pi}{4}": { sin: "\\frac{\\sqrt{2}}{2}", cos: "\\frac{\\sqrt{2}}{2}" },
        "\\frac{\\pi}{3}": { sin: "\\frac{\\sqrt{3}}{2}", cos: "\\frac{1}{2}" },
        "\\frac{\\pi}{2}": { sin: "1", cos: "0" },
        "\\frac{2\\pi}{3}": { sin: "\\frac{\\sqrt{3}}{2}", cos: "-\\frac{1}{2}" },
        "\\frac{3\\pi}{4}": { sin: "\\frac{\\sqrt{2}}{2}", cos: "-\\frac{\\sqrt{2}}{2}" },
        "\\frac{5\\pi}{6}": { sin: "\\frac{1}{2}", cos: "-\\frac{\\sqrt{3}}{2}" },
        "\\pi": { sin: "0", cos: "-1" },
        "\\frac{7\\pi}{6}": { sin: "-\\frac{1}{2}", cos: "-\\frac{\\sqrt{3}}{2}" },
        "\\frac{5\\pi}{4}": { sin: "-\\frac{\\sqrt{2}}{2}", cos: "-\\frac{\\sqrt{2}}{2}" },
        "\\frac{4\\pi}{3}": { sin: "-\\frac{\\sqrt{3}}{2}", cos: "-\\frac{1}{2}" },
        "\\frac{3\\pi}{2}": { sin: "-1", cos: "0" },
        "\\frac{5\\pi}{3}": { sin: "-\\frac{\\sqrt{3}}{2}", cos: "\\frac{1}{2}" },
        "\\frac{7\\pi}{4}": { sin: "-\\frac{\\sqrt{2}}{2}", cos: "\\frac{\\sqrt{2}}{2}" },
        "\\frac{11\\pi}{6}": { sin: "-\\frac{1}{2}", cos: "\\frac{\\sqrt{3}}{2}" },
        "2\\pi": { sin: "0", cos: "1" },
        // Negative angles
        "-\\frac{\\pi}{6}": { sin: "-\\frac{1}{2}", cos: "\\frac{\\sqrt{3}}{2}" },
        "-\\frac{\\pi}{4}": { sin: "-\\frac{\\sqrt{2}}{2}", cos: "\\frac{\\sqrt{2}}{2}" },
        "-\\frac{\\pi}{3}": { sin: "-\\frac{\\sqrt{3}}{2}", cos: "\\frac{1}{2}" },
        "-\\frac{\\pi}{2}": { sin: "-1", cos: "0" },
        "-\\frac{2\\pi}{3}": { sin: "-\\frac{\\sqrt{3}}{2}", cos: "-\\frac{1}{2}" },
        "-\\frac{3\\pi}{4}": { sin: "-\\frac{\\sqrt{2}}{2}", cos: "-\\frac{\\sqrt{2}}{2}" },
        "-\\frac{5\\pi}{6}": { sin: "-\\frac{1}{2}", cos: "-\\frac{\\sqrt{3}}{2}" },
        "-\\pi": { sin: "0", cos: "-1" },
        "-\\frac{7\\pi}{6}": { sin: "\\frac{1}{2}", cos: "-\\frac{\\sqrt{3}}{2}" },
        "-\\frac{5\\pi}{4}": { sin: "\\frac{\\sqrt{2}}{2}", cos: "-\\frac{\\sqrt{2}}{2}" },
        "-\\frac{4\\pi}{3}": { sin: "\\frac{\\sqrt{3}}{2}", cos: "-\\frac{1}{2}" },
        "-\\frac{3\\pi}{2}": { sin: "1", cos: "0" },
        "-\\frac{5\\pi}{3}": { sin: "\\frac{\\sqrt{3}}{2}", cos: "\\frac{1}{2}" },
        "-\\frac{7\\pi}{4}": { sin: "\\frac{\\sqrt{2}}{2}", cos: "\\frac{\\sqrt{2}}{2}" },
        "-\\frac{11\\pi}{6}": { sin: "\\frac{1}{2}", cos: "\\frac{\\sqrt{3}}{2}" },
        "-2\\pi": { sin: "0", cos: "1" }
      };

      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          // Generate a random index from 0 to i
          const j = Math.floor(Math.random() * (i + 1));
          // Swap array[i] with array[j]
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Store the current problems globally so we can toggle answers without regenerating
      let currentProblems = [];

      function generateQuestions() {
        // Choose angle set based on checkbox state
        const useFullCircle = document.getElementById('fullCircle').checked;
        const includeNegative = document.getElementById('includeNegative').checked;
        
        let angleSet;
        if (includeNegative) {
          // When including negative angles, combine positive and negative angle sets
          if (useFullCircle) {
            angleSet = [...anglesFullCircle, ...anglesNegativeFullCircle];
          } else {
            angleSet = [...angles, ...anglesNegative];
          }
        } else {
          // Use only positive angles
          angleSet = useFullCircle ? anglesFullCircle : angles;
        }
        
        let sinProblems = angleSet.map((angle) => ({ 
          question: `\\sin(${angle}) = `, 
          answer: exactValues[angle].sin,
          angle: angle,
          type: 'sin'
        }));
        let cosProblems = angleSet.map((angle) => ({ 
          question: `\\cos(${angle}) = `, 
          answer: exactValues[angle].cos,
          angle: angle,
          type: 'cos'
        }));

        // Shuffle all problems and take first 18
        const allProblems = shuffleArray([...sinProblems, ...cosProblems]);
        currentProblems = allProblems.slice(0, 18);
        displayProblems();
      }

      function displayProblems() {
        const container = document.getElementById("questionsContainer");
        // Clear existing content
        container.innerHTML = '';
        
        const showAnswers = document.getElementById('showAnswers').checked;
        
        for (let i = 0; i < currentProblems.length; i++) {
          const questionDiv = document.createElement("div");
          questionDiv.classList.add("question");

          // Create a span for the question number
          const numberSpan = document.createElement('span');
          numberSpan.textContent = `${i + 1}. `;  // Sequential numbering
          questionDiv.appendChild(numberSpan);

          const latexDiv = document.createElement("span");
          latexDiv.classList.add("math-field");
          questionDiv.appendChild(latexDiv);
          
          // Set the question text
          let displayText = currentProblems[i].question;
          if (showAnswers) {
            displayText += currentProblems[i].answer;
          }
          
          MQ.StaticMath(latexDiv).latex(displayText);
          container.appendChild(questionDiv);
        }
      }

      generateQuestions();

      // Add event listener for the regenerate button
      document.getElementById('regenerateBtn').addEventListener('click', generateQuestions);
      
      // Add event listener for the show answers checkbox
      document.getElementById('showAnswers').addEventListener('change', displayProblems);
      
      // Add event listener for the full circle checkbox
      document.getElementById('fullCircle').addEventListener('change', generateQuestions);
      
      // Add event listener for the include negative angles checkbox
      document.getElementById('includeNegative').addEventListener('change', generateQuestions);
    </script>
  </body>
</html>
